{
    "version": "1.4.5.1926",
    "description": "Cross-platform Apple Music client (alpha version)",
    "license": "AGPL-3.0-or-later",
    "homepage": "https://cider.sh",
    "architecture": {
        "64bit": {
            "url": "https://github.com/ciderapp/cider-releases/releases/download/v1.4.5.1926/Cider-Setup-winget-1.4.5-alpha.1926.exe#/dl.7z",
            "hash": "sha512:c19e09b9dbe5e340911817f1b119c0221dc0c18fffcbc2788e8f2c623f826b6d84cfbae1a2b2a83941f2a28236c1beb0a375a9cd14f2da4b803432d5919fedaa",
            "installer": {
                "script": "Expand-7zipArchive -Path \"$dir\\`$PLUGINSDIR\\app-64.7z\" \"$dir\""
            }
        }
    },
    "post_install": "Remove-Item \"$dir\\`$PLUGINSDIR\", \"$dir\\`$R0\" -Recurse -Force",
    "shortcuts": [
        [
            "Cider.exe",
            "Cider (Nightly)"
        ]
    ],
    "checkver": {
        "script": [
            "$url = 'https://api.github.com/repos/ciderapp/cider-releases/releases'",
            "$content = (Invoke-WebRequest $url).Content",
            "if (!($content -match 'Cider Version (?<stem>[\\d.]+) - Build (?<build>\\d+) \\((?<type>[a-z]+)\\)')) {",
            "   break",
            "}",
            "$vermatches = $matches",
            "if ($vermatches.type -match 'main') {",
            "   break",
            "}",
            "if ($vermatches.type -match 'develop') {",
            "   $vermatches.type = 'alpha'",
            "}",
            "Write-Output \"Version: $($vermatches.stem).$($vermatches.build) | Type: $($vermatches.type)\""
        ],
        "regex": "Version: ((?<stem>[\\d\\.]{5})\\.(?<build>\\d+)) \\| Type: (?<type>.+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/ciderapp/cider-releases/releases/download/v$version/Cider-Setup-winget-$matchStem-$matchType.$matchBuild.exe#/dl.7z",
                "hash": {
                    "url": "$baseurl/latest.yml",
                    "regex": "sha512:\\s+$base64"
                }
            }
        }
    }
}
